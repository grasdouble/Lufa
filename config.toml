# OpenAI Codex Configuration
# This file configures the OpenAI Codex VSCode extension and CLI
# See: https://developers.openai.com/codex/ide/

# Model Configuration
model = "gpt-4-turbo-preview"  # or "gpt-5" when available
model_provider = "openai"

# Approval Policy
# Options: "on-request" (default), "auto-approve", "never"
approval_policy = "on-request"

# Workspace Configuration
# Codex will reference these files for context and instructions
context_files = [
    "AGENTS.md",           # Primary documentation
    "CLAUDE.md",           # Quick reference
    ".github/copilot-instructions.md"  # Copilot instructions (compatible)
]

# Custom Instructions for Lufa Project
# Codex will follow these guidelines when working on this codebase

[custom_instructions]
# Three-Layer Design System Architecture (CRITICAL)
architecture_rules = """
CRITICAL: Lufa uses a four-layer design system architecture with vanilla CSS:
- Layer 1: Primitives - Raw values (--lufa-primitive-*)
- Layer 2: Core - Themeable values (--lufa-core-*)
- Layer 3: Semantic - Contextual values (--lufa-semantic-*)
- Layer 4: Component - Component-specific values (--lufa-component-*)

STYLING APPROACH:
- Vanilla CSS with CSS Modules (NOT Tailwind CSS)
- Use CSS custom properties: var(--lufa-semantic-ui-text-primary), var(--lufa-component-button-*)
- Components use semantic/component tokens via CSS variables, never primitives directly

RULES:
1. Components MUST import from @grasdouble/lufa_design-system-tokens ONLY
2. Components MUST NOT import from @grasdouble/lufa_design-system-primitives
3. Components MUST NOT hard-code values (16px, #FF0000, etc.)
4. Use CSS Modules with token-based CSS custom properties
5. NO @apply directives or Tailwind utility classes
"""

# Build Order (CRITICAL)
build_order = """
Build order matters! Always build in this sequence:
1. pnpm ds:tokens:build       # First - generates types
2. pnpm ds:main:build         # Then components
3. pnpm ds:storybook:build    # Finally Storybook

Or use convenience script: pnpm ds:all:build
"""

# Component Development Standards
component_standards = """
When creating design system components:
1. Use TypeScript with strict mode
2. Define interface with JSDoc comments
3. Set displayName on component
4. Use ComponentPropsWithoutRef<'element'> for HTML props
5. Style with CSS Modules using token-based CSS custom properties
6. NEVER hard-code values - use var(--lufa-semantic-*) or var(--lufa-component-*) in CSS
7. Ensure WCAG 2.1 AA accessibility (ARIA, keyboard, focus)
8. Create Playwright component test
9. Export from packages/design-system/main/src/index.ts
10. Create changeset: pnpm changeset

CSS Example:
  .button {
    padding: var(--lufa-semantic-ui-spacing-default);
    color: var(--lufa-semantic-ui-text-primary);
    /* NOT: padding: 16px; color: #000; */
  }
"""

# Reference to Custom Agents
custom_agents_location = """
Custom agents available in .github/agents/:
- lufa-design-system-expert.agent.md - Design system specialization
- expert-react-frontend-engineer.agent.md - React expertise
- accessibility.agent.md - a11y specialist
- playwright-tester.agent.md - Test generation
- tdd-red.agent.md, tdd-green.agent.md, tdd-refactor.agent.md - TDD workflow

Reference these agents when needed for specialized tasks.
"""

# Reference to Reusable Prompts
prompts_location = """
Reusable prompts available in .github/prompts/:
- playwright-generate-test.prompt.md - Generate Playwright tests
- create-agentsmd.prompt.md - Generate/update AGENTS.md
- ai-prompt-engineering-safety-review.prompt.md - Security review
- create-readme.prompt.md - Generate README files
- model-recommendation.prompt.md - AI model selection

Use these prompts for common tasks.
"""

# Common Commands
[commands]
dev_storybook = "pnpm ds:storybook:dev"
dev_microfrontends = "pnpm app:mf:dev"
build_all = "pnpm all:build"
build_design_system = "pnpm ds:all:build"
test_component = "pnpm --filter @grasdouble/lufa_design-system test-ct"
lint_all = "pnpm all:lint"
format_all = "pnpm all:prettier"
create_changeset = "pnpm changeset"
validate_docs = "pnpm validate:docs"

# Authentication
# Set one of these environment variables:
# - OPENAI_API_KEY (for OpenAI)
# - AZURE_OPENAI_API_KEY (for Azure OpenAI)
#
# Or sign in with ChatGPT account via extension UI
