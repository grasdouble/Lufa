# Documentation

Package: `@grasdouble/lufa_design-system-documentation`
Location: packages/design-system/documentation/
Updated: 2025-12-14
Version: 0.2.0 (Docusaurus 3.9.2)
URL: https://lufa-ds.grasdouble.com

## Stats

- 18 documentation files
- ~2.7 MB build output
- Rspack bundler (faster builds)
- Dependencies: 2 design-system (main, tokens), React 19, Docusaurus 3.9

## Structure

```
packages/design-system/documentation/
├── docs/
│   ├── getting-started/    Installation, setup guides
│   ├── components/         Component usage docs
│   ├── tokens/             Token documentation
│   ├── guides/             Advanced guides
│   ├── intro.md            Introduction page
│   └── accessibility.md    A11y guidelines
├── blog/                   Blog posts (optional)
├── src/
│   ├── components/         Custom React components for docs
│   ├── css/                Custom styles
│   └── pages/              Custom pages
├── static/                 Static assets (images, files)
├── docusaurus.config.ts    Site configuration
├── sidebars.ts             Sidebar structure
└── build/                  Build output
```

## Tech Stack

| Layer     | Technology        | Purpose                    |
| --------- | ----------------- | -------------------------- |
| Framework | Docusaurus 3.9    | Static site generator      |
| Bundler   | Rspack            | Fast builds (experimental) |
| Content   | MDX               | Markdown + React           |
| Styling   | Design System CSS | Consistent with components |
| Language  | TypeScript 5.6    | Type-safe config           |

## Key Concepts

**MDX Integration**: Markdown with embedded React components

```mdx
import { Button } from '@grasdouble/lufa_design-system';

# Button Component

<Button>Click Me</Button>
```

**Sidebar Auto-generation**: Categories from folder structure

```ts
// sidebars.ts
{ type: 'autogenerated', dirName: 'components' }
```

**Future Flags**: Docusaurus v4 compatibility + Rspack

```ts
future: {
  v4: true,
  experimental_faster: { rspackBundler: true }
}
```

## Config

**docusaurus.config.ts**:

- Title: "Lufa Design System"
- URL: https://lufa-ds.grasdouble.com
- Rspack bundler enabled
- Classic preset (docs + blog)

**sidebars.ts**: Auto-generated from docs/ structure

## Build

**Dev**:

```bash
pnpm start
```

Steps: Start dev server → Watch docs/ → Serve on :3000
Output: Hot-reload server (no build output)

**Prod**:

```bash
pnpm build
```

Steps: Bundle MDX → Generate static HTML → Optimize assets
Output: build/ (~2.7 MB static site)
Deploy: Upload to https://lufa-ds.grasdouble.com

**Clear Cache**:

```bash
pnpm clear
```

Required after design-system CSS changes

## Dependencies

**Runtime**: `@grasdouble/lufa_design-system`, `@grasdouble/lufa_design-system-tokens`, `react@19.2`, `react-dom@19.2`, `@docusaurus/core@3.9`, `@mdx-js/react`
**Dev**: `@docusaurus/module-type-aliases`, `@docusaurus/tsconfig`, `@docusaurus/types`, `typescript@5.6`

Purpose:

- design-system: Import components for demos
- tokens: Display token values
- Docusaurus: Static site generation
- MDX: Markdown with React

## Integration

**Import Components**:

```mdx
---
sidebar_position: 1
---

import { Button, Card } from '@grasdouble/lufa_design-system';

import '@grasdouble/lufa_design-system/style.css';

# Button

<Card>
  <Button variant="primary">Example</Button>
</Card>
```

Flow: Import in MDX → Docusaurus bundles → Component renders in docs

**Link to Storybook**:

```mdx
Interactive playground: [View in Storybook](https://lufa-storybook.sebastien-lemouillour.fr/?path=/story/forms-button)
```

Flow: Link from docs → User opens Storybook → Interactive testing

## Workflows

**Add Documentation**:

1. Create `docs/{category}/{page}.md` - New doc file
2. Add frontmatter (`sidebar_position`, `title`) - Metadata
3. Write content with MDX - Markdown + components
4. Run `pnpm start` - Preview locally
5. Build and deploy - Generate static site

**Update After CSS Changes**:

1. Rebuild design-system: `cd ../main && pnpm build` - Update CSS bundle
2. Clear Docusaurus cache: `pnpm clear` - Remove old CSS
3. Restart server: `pnpm start` - Load new styles

## Decisions

- **Rspack bundler**: Experimental faster builds | Why: Faster dev iteration | Trade-off: Less stable than Webpack
- **MDX for content**: Markdown + React | Why: Interactive examples in docs | Trade-off: More complex than plain Markdown
- **Design-system CSS**: Import actual components | Why: Docs match real components | Trade-off: Requires cache clear on CSS changes
- **Docusaurus v4 flags**: Future compatibility | Why: Prepare for v4 migration | Trade-off: Potential breaking changes

## Deployment

Target: Static hosting
URL: https://lufa-ds.grasdouble.com
Method: `pnpm build` → Upload build/
CI/CD: Manual build and deploy

## Debug

| Issue                   | Fix                                                  |
| ----------------------- | ---------------------------------------------------- |
| CSS not applying        | Run `pnpm clear`, rebuild design-system              |
| Component not rendering | Check design-system built, verify import path        |
| Sidebar not showing     | Check frontmatter `sidebar_position`, restart server |
| Build fails             | Clear .docusaurus/, check for MDX syntax errors      |
| Styles conflict         | Design-system uses component-level resets (safe)     |

## Best Practices

**Do**:

- Clear cache after design-system changes
- Use frontmatter for page metadata
- Import actual components for demos
- Link to Storybook for interactive examples

**Don't**:

- Rely on global styles (component resets prevent conflicts)
- Skip cache clear after CSS updates
- Use inline styles (use design-system components)
- Hardcode component examples (import from package)

## Links

- [Design System Overview](./DESIGN_SYSTEM.md)
- [Main Package](./MAIN.md)
- [Storybook](./STORYBOOK.md)
- [Docusaurus Docs](https://docusaurus.io/docs)
